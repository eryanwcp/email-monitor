<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"  
    xsi:schemaLocation="http://www.springframework.org/schema/beans    
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd    
    http://www.springframework.org/schema/context    
    http://www.springframework.org/schema/context/spring-context-2.5.xsd"  
    default-lazy-init="true">  
  
    <!-- 自动扫描 -->  
    <context:annotation-config />  
    <context:component-scan base-package="com.renren">  
    </context:component-scan>  
       
   	<!-- 配置调度工厂 -->
   	<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
   		<property name="triggers">
   			<list>
   				<ref bean="neteasyCronTrigger"/>
   				<ref bean="emailSenderCronTrigger"/>
   			</list>
   		</property>
   	</bean>
   	
   	
    <!-- 接受邮件的定时任务 -->   
    <bean name="neteasyReceverJob" class="org.springframework.scheduling.quartz.JobDetailBean">
    	<property name="jobClass" value="com.renren.mail.monitor.job.NeteasyReceverJob"></property>
    	<property name="jobDataAsMap">
    		<map>
    			<entry key="neteasyEmail">
    				<ref bean="neteasyEmail"></ref>
    			</entry>
    		</map>
    	</property>
    </bean>
    <bean id="neteasyCronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    	<property name="jobDetail" ref="neteasyReceverJob"></property>
    	<property name="cronExpression" value="0 0 * * * ?"></property>
    </bean>
    
    <!-- 发送邮件的定时任务 -->
    <bean name="emailSenderJob" class="org.springframework.scheduling.quartz.JobDetailBean">
    	<property name="jobClass" value="com.renren.mail.monitor.job.EmailSenderJob"></property>
    	<property name="jobDataAsMap">
    		<map>
    			<entry key="emailSenderImpl">
    				<ref bean="emailSenderImpl"></ref>
    			</entry>
    		</map>
    	</property>
    </bean>
    <bean id="emailSenderCronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    	<property name="jobDetail" ref="emailSenderJob"></property>
    	<property name="cronExpression" value="0 0 1 * * ?"></property>
    </bean>
    
    <bean id="emailSenderImpl" class="com.renren.mail.monitor.sender.EmailSenderImpl"></bean>
    <bean id="neteasyTask" class="com.renren.mail.monitor.task.NeteasyTask"></bean>
    <bean id="rateAnalyseStrategy" class="com.renren.mail.monitor.strategy.RateAnalyseStrategy">
    	<property name="senderDomainList" ref="senderDomainList" />
    </bean>
    <bean id="neteasyEmail" class="com.renren.mail.monitor.email.NeteasyEmail">
    	<property name="rateAnalyseStrategy" ref="rateAnalyseStrategy"></property>
    	<property name="mailAccountList" ref="mailAccountList"></property>
    </bean>
    <bean id="neteasyEmailRecever" class="com.renren.mail.monitor.recever.NeteasyEmailRecever"></bean>
</beans>